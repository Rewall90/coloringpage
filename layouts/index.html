{{ define "main" }}
<div class="homepage">
  
  {{/* Hero Section - 2 Column Layout */}}
  <section class="hero-section py-16 mb-12">
    <div class="max-w-7xl mx-auto px-6">
      <div class="lg:grid lg:grid-cols-2 lg:gap-12 lg:items-center">
        {{/* Left Column - Text Content */}}
        <div class="text-center lg:text-left mb-8 lg:mb-0">
          <h1 class="text-4xl md:text-6xl font-bold text-neutral-900 dark:text-neutral mb-6">
            {{ .Title | emojify }}
          </h1>
          {{ with .Params.description }}
            <p class="text-xl md:text-2xl text-neutral-600 dark:text-neutral-400">
              {{ . }}
            </p>
          {{ end }}
          
          {{/* Inline Search Box */}}
          {{ partial "inline-search.html" . }}
        </div>
        
        {{/* Right Column - Hero Image */}}
        {{ with .Site.Params.homepage.homepageImage }}
          <div class="flex justify-center lg:justify-end">
            <img src="{{ . }}" 
                 alt="Hero Image" 
                 class="rounded-xl shadow-xl w-full max-w-md lg:max-w-full object-cover"
                 loading="eager">
          </div>
        {{ end }}
      </div>
    </div>
  </section>

  {{/* Main Content */}}
  {{ if .Content }}
    <section class="homepage-content prose dark:prose-invert max-w-4xl mx-auto mb-16 px-6">
      {{ .Content }}
    </section>
  {{ end }}

  {{/* Categories Section */}}
  <section class="categories-showcase">
    <div class="max-w-7xl mx-auto px-6">
      <h2 class="text-2xl md:text-3xl font-bold text-neutral-900 dark:text-neutral text-center mb-8">
        Browse Categories
      </h2>
      
      {{/* Get all category sections - excluding system sections */}}
      {{ $categories := slice }}
      {{ $excludeSections := slice "posts" "pages" "coloring-pages" }}
      {{ range site.Sections }}
        {{ if not (in $excludeSections .Section) }}
          {{ if .Params.featureimage }}
            {{ $categories = $categories | append . }}
          {{ end }}
        {{ end }}
      {{ end }}
      
      {{ if $categories }}
        <div class="homepage-category-grid">
          {{ range $categories.ByParam "weight" }}
            {{ partialCached "category-card.html" (dict "category" . "size" "grid") .RelPermalink "grid" }}
          {{ end }}
        </div>
        
        {{/* View All Categories Link */}}
        <div class="text-center">
          <a href="/categories/" class="inline-flex items-center px-6 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors duration-300 text-sm">
            View All Categories
            <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>
      {{ else }}
        {{/* No categories found */}}
        <div class="text-center py-16">
          <p class="text-neutral-600 dark:text-neutral-400 text-lg">
            No categories available yet.
          </p>
        </div>
      {{ end }}
    </div>
  </section>
</div>
{{ end }}