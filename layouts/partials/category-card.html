{{/* Category Card Partial - SEO-optimized with responsive images */}}
{{ $category := .category }}

<div class="wp-block-kadence-column kadence-column inner-column-1 group transition-all duration-300 hover:-translate-y-1">
  <div class="kt-inside-inner-col relative">
    <figure class="wp-block-kadence-image kb-image size-medium">
      {{ with $category.Params.featureimage }}
        {{/* Responsive image with srcset */}}
        {{ $responsive := $category.Params.responsive_images }}
        {{ if $responsive }}
          <noscript>
            <img decoding="async" 
                 src="{{ $responsive.thumbnail_300 }}" 
                 alt="{{ $category.Params.image_alt | default $category.Title }}"
                 sizes="(max-width: 300px) 100vw, 300px">
          </noscript>
          <img decoding="async" 
               width="300" 
               height="375"
               src="{{ $responsive.thumbnail_300 }}" 
               alt="{{ $category.Params.image_alt | default $category.Title }}"
               class="kb-img group-hover:opacity-90 transition-opacity duration-200"
               data-pin-url="{{ absURL "/" }}"
               data-pin-title="Free Coloring Pages | {{ site.Title }}"
               data-pin-description="{{ site.Params.description | default "Free, premium printable coloring pages for kids. Easy access and zero cost for endless fun and creativity!" }}"
               srcset="{{ $responsive.thumbnail_200 }} 200w, {{ $responsive.thumbnail_300 }} 300w, {{ $responsive.thumbnail_768 }} 768w, {{ $responsive.thumbnail_896 }} 896w"
               sizes="(max-width: 300px) 100vw, 300px"
               loading="lazy">
        {{ else }}
          {{/* Fallback to single image */}}
          <img decoding="async" 
               src="{{ . }}" 
               alt="{{ $category.Params.image_alt | default $category.Title }}"
               class="kb-img group-hover:opacity-90 transition-opacity duration-200"
               loading="lazy">
        {{ end }}
      {{ else }}
        {{/* Fallback if no image */}}
        <div class="w-full aspect-[3/4] bg-gradient-to-br from-primary-400 to-primary-600 rounded-lg"></div>
      {{ end }}
      
      <figcaption class="text-center mt-2 font-bold text-neutral-900 dark:text-neutral-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-200">
        {{ $category.Title }}
      </figcaption>
    </figure>
    
    {{/* Item count badge (optional) */}}
    {{ $count := len (where $category.Pages "Type" "coloring-page") }}
    {{ if gt $count 0 }}
      <div class="absolute top-2 right-2 bg-white/90 backdrop-blur-sm rounded-full px-2 py-1 z-10">
        <span class="text-xs font-semibold text-neutral-700">{{ $count }}</span>
      </div>
    {{ end }}
  </div>
  <a href="{{ $category.RelPermalink }}" class="kb-section-link-overlay absolute inset-0 z-20" aria-label="View {{ $category.Title }} coloring pages"></a>
</div>